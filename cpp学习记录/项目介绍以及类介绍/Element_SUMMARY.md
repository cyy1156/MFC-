# Element 模块类与功能详解

`Element` 文件夹是一个 **MFC 扩展 DLL**，它封装了一套工业风格的自定义 UI 控件。这些控件被主程序用于构建实时监控界面，提供丰富的视觉反馈。

## 1. 核心控件类

### 1.1 `CBulb` (指示灯/按钮)
*   **功能**: 模拟工业面板上的指示灯或带灯按钮。
*   **特性**:
    *   **双重角色**: 既可以作为纯输出的指示灯（通过颜色变化显示状态），也可以作为输入按钮（响应鼠标点击 `ID_BULB_DOWN` / `ID_BULB_UP`）。
    *   **闪烁功能**: 支持设定闪烁颜色和频率 (`SetFlash`)，用于报警提示。
    *   **形状**: 支持圆形或矩形外观。
*   **应用**: 启动/停止按钮、报警灯、状态指示。

### 1.2 `CDispScreen` (显示屏/示波器)
*   **功能**: 实时数据曲线显示控件，类似于示波器屏幕。
*   **特性**:
    *   **双曲线绘制**: 可同时绘制“给定值” (`m_pOutArray`) 和“控制量/输出值” (`m_pCtrlArray`) 两条曲线。
    *   **网格背景**: 支持自定义网格线数量 (`SetGridNumber`) 和颜色，模拟专业仪器背景。
    *   **动态缩放与偏移**: 支持垂直/水平方向的缩放比例调整 (`SetVoutRatio`, `SetHratio`) 和波形上下平移 (`SetOutOffset`)。
    *   **双缓冲绘图**: 使用内存 DC (`m_pMemDC`) 和位图 (`m_Bitmap`) 防止闪烁。
*   **应用**: 实时显示系统响应曲线，观察 PID 控制效果。

### 1.3 `CPointer` (仪表指针)
*   **功能**: 模拟圆形仪表的指针，用于显示模拟量数值。
*   **特性**:
    *   **旋转绘制**: 根据输入值计算角度，绘制旋转的指针图形。
    *   **多边形指针**: 使用 `m_NeedleA` / `m_NeedleB` 定义指针的几何形状。
    *   **颜色定制**: 可分别设置指针颜色、中心圆点颜色和背景色。
*   **应用**: 压力表、速度表、电压表读数显示。

### 1.4 `CScoreBar` (刻度条/滑动条)
*   **功能**: 线性刻度显示或滑动输入控件。
*   **特性**:
    *   **多方向**: 支持上、下、左、右四个方向 (`DIRECT_UP` 等)。
    *   **范围映射**: 映射最小值 `m_MinValue` 到最大值 `m_MaxValue`。
    *   **鼠标交互**: 支持拖动滑块改变数值（如果启用 `m_Enable`）。
*   **应用**: 液位显示、手动调节控制量（如推杆）。

### 1.5 `CTextOut` (文本显示)
*   **功能**: 增强型静态文本控件，类似于 LED 数字显示屏。
*   **特性**:
    *   **格式化输出**: 支持 `printf` 风格的格式化字符串 (`SetTextFormat`)。
    *   **背景/前景定制**: 可设置独特的背景色和字体颜色，使其在深色工业界面中醒目。
*   **应用**: 实时数值显示（如 "50.0 °C"）。

### 1.6 `CColorStripe` (彩色条带)
*   **功能**: 简单的颜色填充条，用于直观显示比例或进度。
*   **特性**:
    *   根据比例 `m_fRatio` 填充矩形区域。
*   **应用**: 简单的进度条或液位示意。

### 1.7 `CEllipseWnd` (圆形窗口)
*   **功能**: 圆形区域的文本显示或装饰性窗口。
*   **特性**:
    *   使用 `CRgn` 创建圆形窗口区域。
    *   支持居中显示文本。
*   **应用**: 圆形标签或特殊的数值显示区。

### 1.8 `CFireWnd` (火焰特效)
*   **功能**: 模拟火焰燃烧的视觉特效控件。
*   **特性**:
    *   **算法生成**: 基于粒子或元胞自动机算法动态生成火焰纹理 (`BurnPoint`, `RenderFlame`)。
    *   **参数可调**: 可调整燃烧强度、衰减率、扩散率等物理参数。
    *   **调色板动画**: 使用 `CreatePalette` 实现火焰颜色的渐变。
*   **应用**: 这是一个“彩蛋”性质的控件，可能用于演示系统“过热”或仅仅为了增加界面的生动性。

### 1.9 `CToolTipWnd` (气泡提示)
*   **功能**: 自定义的气泡提示窗口。
*   **特性**:
    *   非矩形窗口（圆角矩形或多边形）。
    *   用于在鼠标悬停时显示控件的详细说明。

## 2. 总结

`Element` 模块提供了一整套**所见即所得**的工业控制组件。它们不仅实现了基本的显示功能，还通过双缓冲技术保证了绘图效率，支持无闪烁的实时刷新。这些控件通过 MFC 的消息映射机制（如 `WM_USER+...`）与父窗口进行交互，构成了 RealCtrl 强大而直观的用户界面基础。
